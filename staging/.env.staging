# =====================================
# BERYL3 STAGING ENVIRONMENT
# =====================================
# Production-like configuration for staging deployment
# Domain: beryl3-stage.mdubiel.org

# ----------------------------------------------------
# INFRASTRUCTURE SETTINGS
# ----------------------------------------------------
DOMAIN_NAME=beryl3-stage.mdubiel.org
WEBAPP_IMAGE_URL=us-central1-docker.pkg.dev/your-project-id/beryl3-repo/webapp:latest

# ----------------------------------------------------
# CORE DJANGO SETTINGS
# ----------------------------------------------------
SECRET_KEY=staging-secret-key-change-this-to-50-char-random-string
DEBUG=False
ALLOWED_HOSTS=beryl3-stage.mdubiel.org,localhost,172.20.0.30

# ----------------------------------------------------
# DATABASE (POSTGRES) SETTINGS
# ----------------------------------------------------
PG_USER=beryl3_staging
PG_PASSWORD=staging_secure_db_password_change_this
PG_DB=beryl3_staging
# PG_HOST and PG_PORT are set in docker-compose (postgres:5432)

# ----------------------------------------------------
# REDIS SETTINGS
# ----------------------------------------------------
REDIS_PASSWORD=staging_redis_password_change_this

# ----------------------------------------------------
# EMAIL (RESEND) SETTINGS
# ----------------------------------------------------
# Production email service - Resend
USE_INBUCKET=False
EMAIL_HOST=smtp.resend.com
EMAIL_PORT=587
EMAIL_USE_TLS=True
EMAIL_HOST_USER=resend
EMAIL_HOST_PASSWORD=your_resend_api_key_here
DEFAULT_FROM_EMAIL=Beryl3 Staging <staging@mdubiel.org>

# Email queue configuration
POST_OFFICE_BATCH_SIZE=50
POST_OFFICE_BATCH_TIMEOUT=300
POST_OFFICE_MAX_RETRIES=3
POST_OFFICE_RETRY_INTERVAL=15
POST_OFFICE_MESSAGE_ID_FQDN=beryl3-stage.mdubiel.org

# ----------------------------------------------------
# GOOGLE CLOUD STORAGE (GCS) SETTINGS
# ----------------------------------------------------
# Production-like storage on GCS
USE_GCS_STORAGE=True
GCS_BUCKET_NAME=beryl3-stage
GCS_PROJECT_ID=mateusz-344213
GCS_LOCATION=media
GCS_CREDENTIALS_PATH=/app/gcs-key.json

# ----------------------------------------------------
# LOG COLLECTION SETTINGS
# ----------------------------------------------------
# Loki log forwarding
LOKI_ENABLED=True
LOKI_URL=http://loki:3100

# Log collection ports (for external access)
LOKI_PORT=3100
GRAFANA_PORT=3000
GRAFANA_EXTERNAL_PORT=3000
GRAFANA_ADMIN_PASSWORD=staging_grafana_admin_password_change_this

# ----------------------------------------------------
# APPLICATION FEATURES
# ----------------------------------------------------
APPLICATION_ACTIVITY_LOGGING=True

# Environment identifier
SENTRY_ENVIRONMENT=staging

# ----------------------------------------------------
# EXTERNAL SERVICE URLS (for SYS panel)
# ----------------------------------------------------
EXTERNAL_DB_URL=""
EXTERNAL_INBUCKET_URL=""
EXTERNAL_MONITORING_URL=""
EXTERNAL_SENTRY_URL=""
EXTERNAL_LOKI_URL=http://loki:3100
EXTERNAL_GRAFANA_URL=http://grafana:3000

# ----------------------------------------------------
# SSL/TLS SETTINGS
# ----------------------------------------------------
# SSL certificate paths (from Let's Encrypt)
SSL_CERT_PATH=/opt/ssl/fullchain.pem
SSL_KEY_PATH=/opt/ssl/privkey.pem

# ----------------------------------------------------
# SECURITY SETTINGS
# ----------------------------------------------------
# Django security settings for production-like environment
SECURE_SSL_REDIRECT=True
SECURE_HSTS_SECONDS=31536000
SECURE_HSTS_INCLUDE_SUBDOMAINS=True
SECURE_HSTS_PRELOAD=True
SECURE_CONTENT_TYPE_NOSNIFF=True
SECURE_BROWSER_XSS_FILTER=True
SESSION_COOKIE_SECURE=True
CSRF_COOKIE_SECURE=True