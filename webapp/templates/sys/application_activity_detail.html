{% extends "base_sys.html" %}
{% load lucide %}

{% block title %}Application Activity Detail - Beryl Admin{% endblock %}

{% block page_title %}Application Activity Detail{% endblock %}
{% block page_description %}Detailed view of application activity entry{% endblock %}

{% block content %}
<div class="space-y-6">
    <!-- Header -->
    <div class="flex justify-between items-center">
        <div class="terminal-text">
            <span class="terminal-accent">Activity ID:</span> {{ activity.id }}
        </div>
        <a href="{% url 'sys_application_activity' %}" 
           class="btn btn-outline btn-sm">
            {% lucide 'arrow-left' size=14 class='mr-1' %}
            Back to List
        </a>
    </div>

    <!-- Activity Details -->
    <div class="terminal-bg">
        <div class="p-6">
            <div class="flex items-center justify-between mb-4">
                <h3 class="terminal-accent text-lg font-bold">
                    <span class="terminal-text">></span> ACTIVITY INFORMATION
                </h3>
                <!-- Level Badge -->
                {% if activity.level == 'ERROR' %}
                    <span class="text-red-500 font-mono text-sm font-bold">
                        {{ activity.level }}
                    </span>
                {% elif activity.level == 'WARNING' %}
                    <span class="text-orange-500 font-mono text-sm font-bold">
                        {{ activity.level }}
                    </span>
                {% else %}
                    <span class="text-green-500 font-mono text-sm font-bold">
                        {{ activity.level }}
                    </span>
                {% endif %}
            </div>

            <div class="grid grid-cols-1 gap-6 sm:grid-cols-2">
                <!-- Timestamp -->
                <div>
                    <div class="text-sm terminal-text opacity-80 flex items-center mb-1">
                        {% lucide 'clock' size=12 class='mr-1' %}
                        TIMESTAMP
                    </div>
                    <div class="terminal-text font-mono text-sm">
                        {{ activity.created|date:"M d H:i:s" }}
                        <span class="terminal-text opacity-60 text-xs">
                            ({{ activity.created|timesince }} ago)
                        </span>
                    </div>
                </div>

                <!-- User -->
                <div>
                    <div class="text-sm terminal-text opacity-80 flex items-center mb-1">
                        {% if activity.user %}
                            {% lucide 'user' size=12 class='mr-1' %}
                            USER
                        {% else %}
                            {% lucide 'user-x' size=12 class='mr-1' %}
                            USER (SYSTEM)
                        {% endif %}
                    </div>
                    <div class="terminal-text font-mono text-sm">
                        {% if activity.user %}
                            {{ activity.user.email }}
                            <span class="terminal-text opacity-60 text-xs">
                                (ID: {{ activity.user.id }})
                            </span>
                        {% else %}
                            <span class="terminal-accent">SYSTEM</span>
                        {% endif %}
                    </div>
                </div>

                <!-- Function Name -->
                <div>
                    <div class="text-sm terminal-text opacity-80 flex items-center mb-1">
                        {% lucide 'code' size=12 class='mr-1' %}
                        FUNCTION
                    </div>
                    <div class="terminal-text font-mono text-sm bg-blue-900 bg-opacity-20 px-2 py-1 rounded">
                        {{ activity.function_name }}
                    </div>
                </div>

                <!-- Activity ID -->
                <div>
                    <div class="text-sm terminal-text opacity-80 flex items-center mb-1">
                        {% lucide 'hash' size=12 class='mr-1' %}
                        ID
                    </div>
                    <div class="terminal-text font-mono text-sm">
                        {{ activity.id }}
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Message Section -->
    <div class="terminal-bg">
        <div class="p-6">
            <h3 class="terminal-accent text-lg font-bold mb-4">
                <span class="terminal-text">></span> MESSAGE
            </h3>
            <div class="terminal-text bg-blue-900 bg-opacity-10 rounded p-4">
                <pre class="text-sm whitespace-pre-wrap font-mono">{{ activity.message }}</pre>
            </div>
        </div>
    </div>

    <!-- Metadata Section -->
    {% if activity.meta %}
    <div class="terminal-bg">
        <div class="p-6">
            <h3 class="terminal-accent text-lg font-bold mb-4">
                <span class="terminal-text">></span> METADATA
            </h3>
            <div class="terminal-text bg-blue-900 bg-opacity-10 rounded p-4 overflow-x-auto">
                <pre class="text-xs font-mono whitespace-pre-wrap">{{ activity.meta|pprint }}</pre>
            </div>
        </div>
    </div>
    {% endif %}

    <!-- Actions -->
    <div class="flex justify-between items-center">
        <a href="{% url 'sys_application_activity' %}" 
           class="btn btn-outline btn-sm">
            {% lucide 'arrow-left' size=14 class='mr-1' %}
            Back to Activity List
        </a>
        
        {% if activity.user %}
            <div class="terminal-text text-sm">
                User: <span class="terminal-accent font-mono">{{ activity.user.email }}</span>
            </div>
        {% endif %}
    </div>
</div>
{% endblock %}