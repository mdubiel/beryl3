{% extends "base_sys.html" %}
{% load lucide %}

{% block title %}Import Results - Beryl System Management{% endblock %}

{% block page_title %}Import Results{% endblock %}
{% block page_description %}Data import completion summary and details{% endblock %}

{% block content %}
<div class="space-y-6">
    
    <!-- Import Status -->
    <div class="terminal-bg {% if result.errors %}border-2 border-warning{% else %}border-2 border-success{% endif %}">
        <div class="p-6">
            <h3 class="terminal-accent text-lg font-bold mb-4">
                <span class="terminal-text">></span> IMPORT STATUS
            </h3>
            
            {% if result.errors %}
            <div class="alert alert-warning mb-4">
                <div class="flex items-center gap-2">
                    {% lucide 'triangle-alert' size=16 %}
                    <span class="terminal-text">
                        Import completed with warnings. Some items may not have been imported correctly.
                    </span>
                </div>
            </div>
            {% else %}
            <div class="alert alert-success mb-4">
                <div class="flex items-center gap-2">
                    {% lucide 'circle-check' size=16 %}
                    <span class="terminal-text">Import completed successfully! All data has been imported.</span>
                </div>
            </div>
            {% endif %}
            
            <!-- Import Statistics -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                <div class="stat border border-primary">
                    <div class="stat-figure text-success">
                        {% lucide 'package' size=24 %}
                    </div>
                    <div class="stat-title">Collections</div>
                    <div class="stat-value text-success">{{ result.collections_created }}</div>
                    <div class="stat-desc">Created</div>
                </div>
                
                <div class="stat border border-primary">
                    <div class="stat-figure text-success">
                        {% lucide 'archive' size=24 %}
                    </div>
                    <div class="stat-title">Items</div>
                    <div class="stat-value text-success">{{ result.items_created }}</div>
                    <div class="stat-desc">Created</div>
                </div>
                
                <div class="stat border border-primary">
                    <div class="stat-figure text-info">
                        {% lucide 'link' size=24 %}
                    </div>
                    <div class="stat-title">Links</div>
                    <div class="stat-value text-info">{{ result.links_created }}</div>
                    <div class="stat-desc">Created</div>
                </div>
                
                <div class="stat border border-primary">
                    <div class="stat-figure text-info">
                        {% lucide 'image' size=24 %}
                    </div>
                    <div class="stat-title">Images</div>
                    <div class="stat-value text-info">{{ result.images_downloaded }}</div>
                    <div class="stat-desc">Downloaded</div>
                </div>
            </div>
            
            <div class="mt-4 grid grid-cols-1 md:grid-cols-2 gap-4">
                <div class="stat border border-base-300">
                    <div class="stat-title">Duration</div>
                    <div class="stat-value text-sm">{{ result.duration|floatformat:2 }}s</div>
                    <div class="stat-desc">Processing time</div>
                </div>
                
                <div class="stat border border-base-300">
                    <div class="stat-title">Item Types</div>
                    <div class="stat-value text-sm">{{ result.item_types_created }}</div>
                    <div class="stat-desc">Created/Updated</div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Warnings Section -->
    {% if result.warnings %}
    <div class="terminal-bg border-2 border-warning">
        <div class="p-6">
            <h3 class="terminal-accent text-lg font-bold mb-4">
                <span class="terminal-text">></span> WARNINGS ({{ result.warnings|length }})
            </h3>
            
            <div class="space-y-2">
                {% for warning in result.warnings %}
                <div class="alert alert-warning">
                    <div class="flex items-center gap-2">
                        {% lucide 'triangle-alert' size=16 %}
                        <span class="terminal-text text-sm">{{ warning }}</span>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
    {% endif %}
    
    <!-- Errors Section -->
    {% if result.errors %}
    <div class="terminal-bg border-2 border-error">
        <div class="p-6">
            <h3 class="terminal-accent text-lg font-bold mb-4">
                <span class="terminal-text">></span> ERRORS ({{ result.errors|length }})
            </h3>
            
            <div class="space-y-2">
                {% for error in result.errors %}
                <div class="alert alert-error">
                    <div class="flex items-center gap-2">
                        {% lucide 'x-circle' size=16 %}
                        <span class="terminal-text text-sm">{{ error }}</span>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
    {% endif %}
    
    <!-- Processing Details -->
    <div class="terminal-bg">
        <div class="p-6">
            <h3 class="terminal-accent text-lg font-bold mb-4">
                <span class="terminal-text">></span> PROCESSING DETAILS
            </h3>
            
            <div class="space-y-3 text-sm">
                <div class="flex justify-between">
                    <span class="terminal-text">Started:</span>
                    <span class="terminal-accent">{{ result.start_time|date:"Y-m-d H:i:s" }}</span>
                </div>
                <div class="flex justify-between">
                    <span class="terminal-text">Completed:</span>
                    <span class="terminal-accent">{{ result.end_time|date:"Y-m-d H:i:s" }}</span>
                </div>
                <div class="flex justify-between">
                    <span class="terminal-text">Total Duration:</span>
                    <span class="terminal-accent">{{ result.duration|floatformat:3 }} seconds</span>
                </div>
                <div class="flex justify-between">
                    <span class="terminal-text">Status:</span>
                    <span class="{% if result.errors %}terminal-warning{% else %}terminal-success{% endif %}">
                        {% if result.errors %}COMPLETED WITH ERRORS{% else %}SUCCESS{% endif %}
                    </span>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Action Buttons -->
    <div class="terminal-bg">
        <div class="p-6">
            <h3 class="terminal-accent text-lg font-bold mb-4">
                <span class="terminal-text">></span> NEXT ACTIONS
            </h3>
            
            <div class="flex gap-2">
                <a href="{% url 'sys_import_data' %}" class="btn btn-primary">
                    {% lucide 'upload' size=16 class='mr-2' %} Import More Data
                </a>
                <a href="{% url 'sys_dashboard' %}" class="btn btn-ghost">
                    {% lucide 'arrow-left' size=16 class='mr-2' %} Back to Dashboard
                </a>
                <a href="{% url 'sys_users' %}" class="btn btn-outline">
                    {% lucide 'users' size=16 class='mr-2' %} Manage Users
                </a>
            </div>
        </div>
    </div>
    
</div>
{% endblock %}