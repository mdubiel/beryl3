{% load lucide %}

<form hx-post="{% url 'item_save_personal_info' item.hash %}"
      hx-target="#item-personal-info-{{ item.hash }}"
      hx-swap="outerHTML"
      hx-on::after-request="if (event.detail.pathInfo.requestPath.includes('save-personal-info')) { document.getElementById('personal-info-edit-modal').close(); }"
      hx-headers='{"X-CSRFToken": "{{ csrf_token }}"}'
      class="space-y-4">

    <input type="hidden" name="field_name" value="your_id">

    <div class="form-control">
        <label class="label">
            <span class="label-text">Your ID</span>
        </label>
        <input type="text"
               name="your_id"
               id="your_id_input"
               value="{{ item.your_id }}"
               class="input input-bordered w-full"
               placeholder="{% if suggested_id %}{{ suggested_id }}{% else %}Enter your personal identifier{% endif %}"
               maxlength="100">
        <div class="text-xs text-base-content/70 mt-1">
            {% if suggested_id %}
                Suggested next ID: <strong>{{ suggested_id }}</strong>{% if last_used_id %} (last used: {{ last_used_id }}){% endif %}
            {% else %}
                Your personal identifier for this item (max 100 characters)
            {% endif %}
        </div>
    </div>

    <div class="flex justify-end gap-2">
        <button type="button"
                class="btn btn-ghost"
                onclick="document.getElementById('personal-info-edit-modal').close()">
            Cancel
        </button>
        <button type="submit"
                class="btn btn-primary">
            {% lucide 'save' size=16 class='mr-2' %}
            Save
        </button>
    </div>
</form>
