<label class="label">
    <span class="label-text">{{ attribute.display_name }}</span>
    {% if attribute.help_text %}
        <span class="label-text-alt">{{ attribute.help_text }}</span>
    {% endif %}
</label>

{% if attribute.attribute_type == 'BOOLEAN' %}
    <fieldset class="border border-base-300 rounded-lg p-4">
        <legend class="text-sm font-semibold px-2">{{ attribute.display_name }}</legend>
        <div class="flex items-center justify-center gap-4">
            <span class="label-text text-error">No</span>
            <input type="checkbox" class="toggle toggle-success" id="attr-toggle" onchange="document.getElementById('attr-value-hidden').value = this.checked ? '1' : '0'" />
            <input type="hidden" name="attribute_value" id="attr-value-hidden" value="0" />
            <span class="label-text text-success">Yes</span>
        </div>
    </fieldset>
{% elif attribute.attribute_type == 'LONG_TEXT' %}
    <textarea name="attribute_value" class="textarea textarea-bordered w-full" rows="3"
              {% if attribute.required %}required{% endif %}></textarea>
{% elif attribute.attribute_type == 'CHOICE' %}
    <select name="attribute_value" class="select select-bordered w-full"
            {% if attribute.required %}required{% endif %}>
        <option value="">Select...</option>
        {% for choice in attribute.choices %}
            <option value="{{ choice }}">{{ choice }}</option>
        {% endfor %}
    </select>
{% elif attribute.attribute_type == 'DATE' %}
    <input type="date" name="attribute_value" class="input input-bordered w-full"
           {% if attribute.required %}required{% endif %}>
{% elif attribute.attribute_type == 'NUMBER' %}
    <input type="number" name="attribute_value" class="input input-bordered w-full"
           {% if attribute.required %}required{% endif %} step="any">
{% elif attribute.attribute_type == 'URL' %}
    <input type="url" name="attribute_value" class="input input-bordered w-full"
           {% if attribute.required %}required{% endif %}
           placeholder="https://example.com">
{% elif attribute.attribute_type == 'EMAIL' %}
    <input type="email" name="attribute_value" class="input input-bordered w-full"
           {% if attribute.required %}required{% endif %}
           placeholder="email@example.com">
{% else %}
    {# TEXT or fallback - Task 57: Add autocomplete #}
    <div class="relative">
        <input type="text" name="attribute_value"
               id="attr-value-input-{{ attribute.name }}"
               list="attr-suggestions-{{ attribute.name }}"
               class="input input-bordered w-full"
               {% if attribute.required %}required{% endif %}
               placeholder="Type at least 3 characters for suggestions..."
               autocomplete="off"
               hx-get="{% url 'item_autocomplete_attribute_value' item.hash %}"
               hx-trigger="keyup changed delay:300ms[target.value.length >= 3]"
               hx-target="#attr-suggestions-{{ attribute.name }}"
               hx-swap="innerHTML"
               hx-vals='js:{"q": document.getElementById("attr-value-input-{{ attribute.name }}").value, "attribute_name": "{{ attribute.name }}"}'
               >
        <datalist id="attr-suggestions-{{ attribute.name }}">
            {# Suggestions will be loaded here via HTMX #}
        </datalist>
    </div>
{% endif %}
